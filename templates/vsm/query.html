{% extends '../virs-base.html' %}

{% block title %}{{ title }}{% endblock title%}

{% block content %}

    <div class="row">
        <form id="query-form" action=pesquisa method="POST" enctype="multipart/form-data">
            {% csrf_token %}
            <div class="col-lg-12">
                <div class="input-group">
                    <input type="text" class='form-control' name='query' placeholder="Consulta na Coleção" required>
                    <span class="input-group-btn">
                    <button class="btn btn-primary" type="submit"><i class="fa fa-search"></i>&nbsp</button>
                    </span>
                </div>
            </div>
        </form>
    </div>

    {% comment %} DOCS LIST {% endcomment %}
    <div class="card">
        <h3>DOCS</h3>
        <ul>
            {% for doc in docs %}
            <li>{{ doc }}</li>
            {% endfor %}
        </ul>
    </div>

    {% comment %} TFIDFS TABLE {% endcomment %}
    <div class="card">
        <h3>TFIDFS</h3>
        <table>

            {% comment %} TABLE HEADERS: DOC TITLES AND COLLECTION TERMS {% endcomment %}
            <tr>
                <th>DOC</th>
                {% for tf in tfidfs %}
                    {% if forloop.first %}
                        {% for t in tf %}
                            <th>{{ terms|index:forloop.counter0 }}</th>
                        {% endfor %}
                    {% endif %}
                {% endfor %}
            </tr>

            {% comment %} DOCS AND TERM FREQUENCIES {% endcomment %}
            {% for doc in docs %}
            <tr>
                <td>{{ doc }}</td>
                {% for tf in tfidfs|index:forloop.counter0 %}
                    <td>{{ tf|around }}</td>
                {% endfor %}
            </tr>
            {% endfor %}

            {% comment %} QUERY FREQUENCIES {% endcomment %}
            <tr>
                <td><strong><em>CONSULTA</em></strong></td>
            {% for w in wq %}
                <td>{{ w }}</td>
            {% endfor %}
            </tr>

        </table>
    </div>

    {% comment %} RANKING {% endcomment %}
    <div class="card">
        <div class="block">
            <h3>Resultados</h3>
        </div>
        <div class="row">
            <div class="col-lg-2 col-md-3 col-sm-4 col-xs-6"><h4 class="block">Similaridades</h4></div>
            <div class="col-lg-10 col-md-9 col-sm-8 col-xs-6"><h4 class="block">Documentos</h4></div>
        </div>
        {% for doc in ranking %}
        <div class="row">
            <div class="col-lg-2 col-md-3 col-sm-4 col-xs-6">{{ doc.0 }}</div>
            <div class="col-lg-10 col-md-9 col-sm-8 col-xs-6">{{ doc.1 }}</div>
            <div class="col-lg-12"><hr></div>
        </div>
        {% endfor %}
    </div>


{% endblock content %}